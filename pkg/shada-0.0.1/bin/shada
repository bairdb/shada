#!/usr/bin/ruby

ENV['CONFIG'] = "main"
ENV['ROOT'] = '/home/admin/base/site/'

require "shada"

Shada::Config.load_config "#{ENV['ROOT']}config/#{ENV['CONFIG']}.yml"

Shada::CLI.cli do
  
	task :generate do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
    #puts "#{name} - #{Shada::Config["ApplicationPath"]}"
    unless name.nil?
      generator = Shada::Generator.new name, Shada::Config["ApplicationPath"]
      generator.generate
    end
	end
	
	task :generate_model do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
	  #puts "#{name} - #{Shada::Config["ApplicationPath"]}"
    unless name.nil?
      generator = Shada::Generator.new name, Shada::Config["ApplicationPath"]
      generator.generate_model
    end
	end
	
	task :generate_controller do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
	  #puts "#{name} - #{Shada::Config["ApplicationPath"]}"
		unless name.nil?
		  generator = Shada::Generator.new name, Shada::Config["ApplicationPath"]
      generator.generate_controller
    end
	end
	
	task :remove do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
    unless name.nil?
      generator = Shada::Generator.new name, Shada::Config["ApplicationPath"]
      generator.remove
    end
  end
  
  task :remove_controller do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
    unless name.nil?
      generator = Shada::Generator.new name, Shada::Config["ApplicationPath"]
      generator.remove_controller
    end
  end
  
  task :remove_model do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
    unless name.nil?
      generator = Shada::Generator.new name, Shada::Config["ApplicationPath"] 
      generator.remove_model
    end
  end
	
	task :create_table do |args|
	  args = args[:dict].count > 0 ? args[:dict] : args[:arr]
    name = args[0] || args[:name]
    Shada::Data::Core.create name.downcase
  end
  
  task :create_row do |args|
	  puts args
  end
	
end

